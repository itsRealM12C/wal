<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<title>webOS Launcher + Menus</title>
<style>
body{margin:0;padding:10px;font-family:Arial,sans-serif;background:#0b0b0b;color:#fff;overflow:hidden}
#mainUI{position:absolute;top:10px;right:10px;width:260px}
h1{font-size:20px;color:#dcdcdc;text-shadow:0 0 4px #000;margin:8px 0}
.btn{display:block;width:100%;margin:4px 0;padding:10px;background:linear-gradient(#303030,#1a1a1a);border:2px solid #555;border-radius:10px;color:#fff;font-weight:bold;cursor:pointer;box-shadow:0 4px 6px rgba(0,0,0,.6)}
.btn:hover{background:linear-gradient(#444,#222);border-color:#888}
.dialog{position:absolute;background:rgba(0,0,0,.85);padding:10px;border-radius:10px;display:none;min-width:240px;z-index:99}
.dialog h2{margin:0 0 6px;color:#dcdcdc;font-size:18px}
.dialog .close-btn{cursor:pointer;color:#f55;text-align:right;margin-top:6px}
#pcmDialog{top:10px;right:280px}
#log{position:absolute;bottom:0;left:0;width:48vw;max-height:36vh;overflow:auto;background:rgba(255,255,255,.05);padding:6px;font-size:12px;color:#9a9a9a;white-space:pre-wrap;cursor:move;resize:both;}
</style>
</head>
<body>

<div id="mainUI">
  <h1>üîä Volume</h1>
  <button class="btn" onclick="volumeUp()">Volume Up</button>
  <button class="btn" onclick="volumeDown()">Volume Down</button>
  <button class="btn" onclick="toggleMute()">Mute</button>
  <div style="display:flex;align-items:center;margin-top:4px;">
    <input type="number" id="volumeInput" placeholder="Set volume" style="flex:1;margin-right:4px;" value="10">
    <button class="btn" style="flex:0 0 auto;" onclick="setVolumeFromInput()">Set</button>
  </div>

  <h1>üéõÔ∏è PCM Sounds</h1>
  <button class="btn" id="pcmBtn">PCM Sounds</button>
</div>

<div class="dialog" id="pcmDialog">
  <h2>PCM Sounds</h2>
  <div id="pcmButtons"></div>
  <div class="close-btn" onclick="closeDialog('pcmDialog')">‚úï Close</div>
</div>

<pre id="log">[LOG]</pre>

<script>
let currentVolume=10,isMuted=false;
function log(m){const L=document.getElementById('log');L.textContent='['+new Date().toLocaleTimeString()+'] '+m+'\n'+L.textContent;}

// ----- Volume controls -----
function volumeUp(){currentVolume++;setVolume(currentVolume);}
function volumeDown(){currentVolume--;setVolume(currentVolume);}
function toggleMute(){isMuted=!isMuted;sendReq('ssap://audio/setMute',{mute:isMuted});log('Mute '+isMuted);}
function setVolume(v){currentVolume=v;sendReq('ssap://audio/setVolume',{volume:currentVolume});log('Volume '+currentVolume);}
function setVolumeFromInput(){const v=parseInt(document.getElementById('volumeInput').value,10);if(!isNaN(v))setVolume(v);}

// ----- PCM Sounds -----
const pcmSounds=[
  {label:'Power On',name:'power-on'},
  {label:'Power Off',name:'power-off'},
  {label:'Welcome',name:'welcome'},
  {label:'FU Fail',name:'first-use-fail'},
  {label:'FU Success',name:'first-use-success'},
  {label:'Input Detected',name:'input-detected'},
  {label:'Voice Start',name:'voicestart'},
  {label:'Voice Confirm',name:'voiceconfirm'},
  {label:'Voice Cancel',name:'voicecancel'},
  {label:'Loading',name:'loading'}
];

const pcmBtn=document.getElementById('pcmBtn');
if(pcmBtn){pcmBtn.onclick=()=>{
  const container=document.getElementById('pcmButtons');container.innerHTML='';
  pcmSounds.forEach(s=>{
    const b=document.createElement('button');b.className='btn';b.textContent=s.label;
    b.onclick=()=>sendReq('ssap://com.webos.audio/systemsounds/playFeedback',{play:true,sink:'pfeedback',name:s.name});
    container.appendChild(b);
  });
  document.getElementById('pcmDialog').style.display='block';
}};

// ----- Dialog close -----
function closeDialog(id){document.getElementById(id).style.display='none';}

// ----- Draggable log -----
const logWidget=document.getElementById('log');let drag=false,offsetX=0,offsetY=0;
logWidget.addEventListener('mousedown',e=>{drag=true;offsetX=e.clientX-logWidget.getBoundingClientRect().left;offsetY=e.clientY-logWidget.getBoundingClientRect().top;});
document.addEventListener('mousemove',e=>{if(drag){logWidget.style.left=(e.clientX-offsetX)+'px';logWidget.style.top=(e.clientY-offsetY)+'px';}});
document.addEventListener('mouseup',e=>{drag=false;});

// ----- Dummy sendReq for demo -----
function sendReq(uri,payload){log('SEND '+uri+' '+JSON.stringify(payload));}
</script>

</body>
</html>
