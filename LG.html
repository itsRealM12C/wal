<!DOCTYPE html>
<html>
<head>
  <title>LG TV Apps</title>
  <meta name="viewport" charset="UTF-8" content="width=device-width, initial-scale=1, user-scalable=yes, minimum-scale=1.0">
  <style>
body {
  font-family: Arial, sans-serif;
  padding: 20px;
  background: #f5f5f5;
}

button {
  padding: 12px 24px;
  font-size: 16px;
  background: #8e44ad;
  color: white;
  border: none;
  cursor: pointer;
  margin-bottom: 20px;
}

.app-card {
  float: left;
  width: 150px;
  background: white;
  padding: 15px;
  text-align: center;
  margin: 10px;
}

.app-icon {
  width: 80px;
  height: 80px;
  display: block;
  margin: 0 auto 10px;
}

.app-title {
  font-size: 14px;
  font-weight: bold;
  color: #333;
}
  </style>
</head>
<body>
  <script src="webOSTV.js" charset="utf-8"></script>
  <script src="webOSTV-dev.js" charset="utf-8"></script>
  
  <button onclick="fetchApps()">Fetch Apps</button>
  <div id="out"></div>
  
  <script>
  function fetchApps() {
    document.getElementById("out").innerHTML = "Loading...";
    
    var request = webOS.service.request("luna://com.webos.applicationManager", {
      method: "listApps",
      parameters: {},
      onSuccess: function (inResponse) {
        console.log("Apps loaded successfully");
        var out = document.getElementById("out");
        out.innerHTML = "";
        
        var apps = inResponse.apps;
        for (var i = 0; i < apps.length; i++) {
          var app = apps[i];
          
          var card = document.createElement("div");
          card.className = "app-card";
          
          var icon = document.createElement("img");
          icon.className = "app-icon";
          icon.src = app.icon || app.largeIcon;
          
          var title = document.createElement("div");
          title.className = "app-title";
          title.innerHTML = app.title || app.id;
          
          card.appendChild(icon);
          card.appendChild(title);
          out.appendChild(card);
        }
      },
      onFailure: function (inError) {
        console.log("Failed to load apps");
        console.log("[" + inError.errorCode + "]: " + inError.errorText);
        document.getElementById("out").innerHTML = "Error: [" + inError.errorCode + "]: " + inError.errorText;
        return;
      }
    });
  }
  </script>
</body>
</html>
