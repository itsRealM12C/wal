<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>webOS Launcher + Generators</title>
<style>
body{margin:0;padding:0;font-family:Arial,sans-serif;background:#0b0b0b;color:#fff;overflow:hidden;}
h1{font-size:18px;color:#dcdcdc;text-shadow:0 0 4px #000;margin:8px 0;}
.btn{display:block;width:200px;margin:4px auto;padding:8px;background:linear-gradient(#303030,#1a1a1a);border:2px solid #555;border-radius:10px;color:#fff;font-weight:bold;text-align:center;cursor:pointer;}
.btn:hover{background:linear-gradient(#444,#222);border-color:#888;}
.form-box{background:rgba(255,255,255,0.05);padding:8px;border-radius:8px;margin:4px auto;width:220px;text-align:left;}
.form-box label{font-size:13px;color:#ccc;margin-top:4px;display:block;}
.form-box input[type=text]{width:100%;padding:5px;border-radius:6px;border:1px solid #444;background:#222;color:#fff;}
#log{position:absolute;bottom:0;left:0;width:100%;height:120px;overflow:auto;background:rgba(0,0,0,0.6);font-size:12px;padding:4px;color:#9a9a9a;box-sizing:border-box;}
.ui-section{position:absolute;top:10px;left:10px;width:250px;}
.extra-section{position:absolute;top:10px;right:10px;width:200px;}
.pcm-dialog{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:#111;border:2px solid #555;padding:10px;border-radius:10px;width:300px;display:none;z-index:100;}
.pcm-dialog h2{font-size:16px;margin:0 0 6px 0;color:#dcdcdc;}
.pcm-dialog button{display:block;width:100%;margin:4px 0;}
.pcm-close{position:absolute;top:4px;right:6px;background:#900;border:none;color:#fff;border-radius:4px;cursor:pointer;width:24px;height:24px;}
</style>
</head>
<body>

<div class="ui-section">
<h1>üì∫ LG Launcher</h1>
<button class="btn" onclick="launchApp('com.webos.app.browser')">Web Browser</button>
<button class="btn" onclick="launchApp('com.webos.app.cheeringtv')">Cheering TV</button>
<button class="btn" onclick="launchApp('com.palm.app.settings')">Settings</button>
<button class="btn" onclick="launchApp('com.webos.app.installation')">Secret Menu</button>
<button class="btn" onclick="launchApp('com.webos.app.discovery')">LG Content Store</button>

<h1>üîä Volume</h1>
<button class="btn" onclick="volumeUp()">Up</button>
<button class="btn" onclick="volumeDown()">Down</button>
<button class="btn" onclick="toggleMute()">Mute</button>

<h1>üçû Toast</h1>
<div class="form-box">
<label>Message:</label><input type="text" id="toastMsg" placeholder="Toast message">
<label>Icon URL:</label><input type="text" id="toastIcon" placeholder="icon.png">
<label><input type="checkbox" id="toastOnclick"> Add OnClick</label>
<button class="btn" onclick="generateToast()">Send Toast</button>
</div>

<h1>‚ö†Ô∏è Alert</h1>
<div class="form-box">
<label>Title:</label><input type="text" id="alertTitle" placeholder="Alert title">
<label>Message:</label><input type="text" id="alertMessage" placeholder="Alert message">
<label>Buttons (comma):</label><input type="text" id="alertButtons" placeholder="OK, Cancel">
<button class="btn" onclick="generateAlert()">Send Alert</button>
</div>

<button class="btn" onclick="showPCMSound()">PCM Sound Player</button>
</div>

<div class="extra-section">
<h1>üì± Extra</h1>
<button class="btn" data-key="FRONTKEY_INPUT_SELECT">Input</button>
<button class="btn" data-key="MENU">Quick Settings</button>
<button class="btn" data-key="PAIRING_M4">Magic Remote Pair</button>
<button class="btn" data-key="BRIGHTNESS_UP">Brightness +</button>
<button class="btn" data-key="BRIGHTNESS_DOWN">Brightness -</button>
<button class="btn" id="tvHotkeyMenuBtn">TVHotkey Menu</button>
<button class="btn" id="otherMenuBtn">Other</button>
</div>

<div id="log"></div>

<div class="pcm-dialog" id="pcmDialog">
<button class="pcm-close" onclick="closePCMSound()">X</button>
<h2>PCM Sounds</h2>
<div id="pcmButtons"></div>
</div>

<script src="https://dropbox.inf.re/webos-gfn/wsproxy.js"></script>
<script src="https://dropbox.inf.re/webos-gfn/client.js"></script>
<script>
let client,currentVolume=10,isMuted=false;
const pcmList=["power-on","power-off","welcome","first-use-fail","first-use-success","input-detected","voicestart","voiceconfirm","voicecancel","loading"];
function log(msg){document.getElementById("log").innerText="["+new Date().toLocaleTimeString()+"] "+msg+"\n"+document.getElementById("log").innerText;}
async function initClient(){if(client)return;const target="127.0.0.1";client=new SSAPClient(target,localStorage["client-key-"+target]);await client.connect();localStorage["client-key-"+target]=await client.register();}
async function sendRequest(uri,payload){const is53=navigator.userAgent.indexOf("Chrome/53")!==-1;if(is53){webOS.service.request(uri.replace("ssap://","luna://"),{method:"call",parameters:payload,onSuccess:r=>log("Success"),onFailure:e=>log("Fail")});}else{if(!client)await initClient();await client.request({uri,payload});}}
async function launchApp(id){await sendRequest("ssap://system.launcher/launch",{id});log("Launched "+id);}
async function volumeUp(){currentVolume++;await sendRequest("ssap://audio/setVolume",{volume:currentVolume});log("Vol "+currentVolume);}
async function volumeDown(){currentVolume=Math.max(0,currentVolume-1);await sendRequest("ssap://audio/setVolume",{volume:currentVolume});log("Vol "+currentVolume);}
async function toggleMute(){isMuted=!isMuted;await sendRequest("ssap://audio/setMute",{mute:isMuted});log("Mute "+isMuted);}
async function generateToast(){let msg=document.getElementById("toastMsg").value||"Hello!";let icon=document.getElementById("toastIcon").value||"";let add=document.getElementById("toastOnclick").checked;let p={message:msg};if(icon)p.iconUrl=icon;if(add)p.onclick={appId:"com.webos.app.browser",params:{target:"https://inputrunner.github.io/simple_index.html"}};await sendRequest("ssap://system.notifications/createToast",p);log("Toast sent");}
async function generateAlert(){let t=document.getElementById("alertTitle").value||"Alert";let m=document.getElementById("alertMessage").value||"Test";let b=document.getElementById("alertButtons").value.split(",").map(x=>x.trim());await sendRequest("ssap://system.notifications/createAlert",{title:t,message:m,buttons:b.map(label=>({label}))});log("Alert sent");}

// Extra buttons
document.querySelectorAll('button[data-key]').forEach(b=>b.addEventListener('click',()=>{let k=b.dataset.key;sendRequest("ssap://com.webos.service.tvinput/sendKeyEvent",{key:k});log("Sent key "+k);}));

// PCM dialog
function showPCMSound(){let div=document.getElementById("pcmButtons");div.innerHTML="";pcmList.forEach(s=>{let btn=document.createElement("button");btn.innerText=s;btn.onclick=()=>sendRequest("ssap://com.webos.audio/systemsounds/playFeedback",{play:true,sink:"pfeedback",name:s});div.appendChild(btn);});document.getElementById("pcmDialog").style.display="block";}
function closePCMSound(){document.getElementById("pcmDialog").style.display="none";}

// TVHotkey menu
document.getElementById("tvHotkeyMenuBtn").addEventListener("click",()=>sendRequest("ssap://system.notifications/createAlert",{title:"TVHotkey",message:"Choose:",buttons:[{label:"Energy",onclick:"luna://com.webos.service.applicationManager/launch",params:{id:"com.webos.app.tvhotkey",params:{activateType:"energy-saving-mode"}}}]}));
document.getElementById("otherMenuBtn").addEventListener("click",()=>sendRequest("ssap://system.notifications/createAlert",{title:"Pick Browser",message:"Select:",buttons:[{label:"Web Browser",onclick:"luna://com.webos.applicationManager/launch",params:{id:"com.webos.app.browser"}}]}));
</script>
</body>
</html>
