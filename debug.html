<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>webOS UI Widget</title>
<style>
body{margin:0;padding:10px;font-family:Arial,sans-serif;background:#0b0b0b;color:#fff;}
.btn{padding:5px 10px;margin:2px;background:#222;border:1px solid #555;color:#fff;border-radius:4px;cursor:pointer;}
.dialog{position:absolute;background:#181818;border:1px solid #555;padding:10px;border-radius:6px;}
#log{white-space:pre-wrap;}
.row{margin-top:5px;}
input[type=number]{padding:2px;border-radius:4px;border:1px solid #555;background:#111;color:#fff;}
</style>
</head>
<body>
<div id="mainUI">
  <button id="pcmBtn" class="btn">PCM Sounds</button>
  <div id="pcmDialog" class="dialog" style="display:none"><div id="pcmButtons"></div></div>

  <button id="tvHotkeyMenuBtn" class="btn">TV Hotkeys</button>
  <div id="tvHotkeyDialog" class="dialog" style="display:none"><div id="tvHotkeyButtons"></div></div>
</div>

<div id="log" class="dialog"></div>

<script src="https://raw.githubusercontent.com/itsRealM12C/wal/refs/heads/main/SSAPClient.js"></script>
<script src="https://raw.githubusercontent.com/itsRealM12C/wal/refs/heads/main/your-second-script.js"></script>
<script>
// --- Draggable log ---
const logWidget=document.querySelector('#log');
logWidget.style.width='350px';logWidget.style.height='200px';logWidget.style.top='50px';logWidget.style.right='50px';logWidget.style.background='rgba(0,0,0,0.85)';logWidget.style.border='2px solid #555';logWidget.style.padding='6px';logWidget.style.overflow='auto';logWidget.style.resize='both';logWidget.style.cursor='move';logWidget.style.zIndex='100';
let isDragging=false,offsetX=0,offsetY=0;
logWidget.addEventListener('mousedown',e=>{isDragging=true;offsetX=e.clientX-logWidget.getBoundingClientRect().left;offsetY=e.clientY-logWidget.getBoundingClientRect().top;});
document.addEventListener('mousemove',e=>{if(isDragging){logWidget.style.left=(e.clientX-offsetX)+'px';logWidget.style.top=(e.clientY-offsetY)+'px';}});
document.addEventListener('mouseup',()=>{isDragging=false;});

// --- Log function ---
function log(msg){logWidget.innerText='['+new Date().toLocaleTimeString()+'] '+msg+'\n'+logWidget.innerText;}

// --- SSAP Client ---
let client;
async function initClient(){if(client)return;client=new SSAPClient('127.0.0.1',localStorage['client-key-127.0.0.1']);log('Connecting...');await client.connect();log('Registering...');localStorage['client-key-127.0.0.1']=await client.register();log('Client ready.');}
function sendReq(uri,payload={}){(async()=>{try{if(!client)await initClient();await client.request({uri,payload});log('OK: '+uri);}catch(e){log('ERR: '+e);}})();}
function launchApp(id){sendReq('ssap://system.launcher/launch',{id});}

// --- Volume ---
let currentVolume=10,isMuted=false;
function setVolume(val){currentVolume=parseInt(val)||0;sendReq('ssap://audio/setVolume',{volume:currentVolume});log('Volume: '+currentVolume);}
function volumeUp(){setVolume(currentVolume+1);}
function volumeDown(){setVolume(currentVolume-1);}
function toggleMute(){isMuted=!isMuted;sendReq('ssap://audio/setMute',{mute:isMuted});log('Mute: '+isMuted);}

// --- PCM ---
const pcmSounds=[{label:'Power On',name:'power-on'},{label:'Power Off',name:'power-off'},{label:'Welcome',name:'welcome'},{label:'FU Fail',name:'first-use-fail'},{label:'FU Success',name:'first-use-success'},{label:'Input Detected',name:'input-detected'},{label:'Voice Start',name:'voicestart'},{label:'Voice Confirm',name:'voiceconfirm'},{label:'Voice Cancel',name:'voicecancel'},{label:'Loading',name:'loading'}];
document.getElementById('pcmBtn').onclick=()=>{
  const c=document.getElementById('pcmButtons');c.innerHTML='';pcmSounds.forEach(s=>{const b=document.createElement('button');b.className='btn';b.textContent=s.label;b.onclick=()=>sendReq('ssap://com.webos.audio/systemsounds/playFeedback',{play:true,sink:'pfeedback',name:s.name});c.appendChild(b);});document.getElementById('pcmDialog').style.display='block';
};

// --- TVHotkeys ---
const tvHotkeyButtons=[{label:'Home',onclick:'ssap://system.launcher/launch',params:{id:'com.webos.app.fullhome'}},{label:'Full Home',onclick:'ssap://system.launcher/launch',params:{id:'com.webos.app.fullhome'}},{label:'Energy Saving',onclick:'ssap://system.launcher/launch',params:{id:'com.webos.app.tvhotkey',params:{activateType:'energy-saving-mode'}}},{label:'Aspect Ratio',onclick:'ssap://system.launcher/launch',params:{id:'com.webos.app.tvhotkey',params:{activateType:'aspect-ratio'}}},{label:'Store Mode',onclick:'ssap://system.launcher/launch',params:{id:'com.webos.app.tvhotkey',params:{activateType:'store-mode'}}},{label:'Soccer Mode',onclick:'ssap://system.launcher/launch',params:{id:'com.webos.app.tvhotkey',params:{activateType:'soccer-mode'}}},{label:'Sleep Timer',onclick:'ssap://system.launcher/launch',params:{id:'com.webos.app.tvhotkey',params:{activateType:'sleep'}}},{label:'Subtitle',onclick:'ssap://system.launcher/launch',params:{id:'com.webos.app.tvhotkey',params:{activateType:'subtitle'}}},{label:'SIMPLINK',onclick:'ssap://system.launcher/launch',params:{id:'com.webos.app.tvhotkey',params:{activateType:'simplink'}}},{label:'3D Mode',onclick:'ssap://system.launcher/launch',params:{id:'com.webos.app.tvhotkey',params:{activateType:'3d-mode'}}}];
document.getElementById('tvHotkeyMenuBtn').onclick=()=>{const c=document.getElementById('tvHotkeyButtons');c.innerHTML='';tvHotkeyButtons.forEach(s=>{const b=document.createElement('button');b.className='btn';b.textContent=s.label;b.onclick=()=>sendReq(s.onclick,s.params||{});c.appendChild(b);});document.getElementById('tvHotkeyDialog').style.display='block';};

// --- Volume Input ---
const volInput=document.createElement('input');volInput.type='number';volInput.style.width='60px';volInput.value=currentVolume;
const setBtn=document.createElement('button');setBtn.className='btn';setBtn.textContent='Set';setBtn.onclick=()=>setVolume(volInput.value);
document.getElementById('mainUI').appendChild(volInput);document.getElementById('mainUI').appendChild(setBtn);

// --- Inputs Panel ---
const inputDialog=document.createElement('div');inputDialog.className='dialog';inputDialog.style.top='100px';inputDialog.style.left='100px';inputDialog.style.display='none';inputDialog.style.zIndex='100';
inputDialog.innerHTML=`<h2>Inputs</h2>
<div class="row">
  <button class="input-btn" data-src="ext://hdmi:1">HDMI 1</button>
  <button class="input-btn" data-src="ext://hdmi:2">HDMI 2</button>
  <button class="input-btn" data-src="ext://hdmi:3">HDMI 3</button>
  <button class="input-btn" data-src="ext://hdmi:4">HDMI 4</button>
</div>
<div class="row">
  <button class="input-btn" data-src="ext://comp:1">Component 1</button>
  <button class="input-btn" data-src="ext://av:1">AV 1</button>
  <button class="input-btn" data-src="ext://av:2">AV 2</button>
  <button class="input-btn" data-src="ext://scart:1">SCART 1</button>
</div>
<div class="row">
  <button class="input-btn" data-src="atv://cable:1/dvb/1">Live TV 1</button>
  <button class="input-btn" data-src="atv://cable:2/dvb/2">Live TV 2</button>
</div>`;
document.body.appendChild(inputDialog);

// draggable
let dragEl=null,dx=0,dy=0;
inputDialog.addEventListener('mousedown',e=>{dragEl=inputDialog;dx=e.clientX-inputDialog.offsetLeft;dy=e.clientY-inputDialog.offsetTop;});
document.addEventListener('mousemove',e=>{if(dragEl){dragEl.style.left=(e.clientX-dx)+'px';dragEl.style.top=(e.clientY-dy)+'px';}});
document.addEventListener('mouseup',()=>{dragEl=null;});

// Inputs button
const inputsBtn=document.createElement('button');inputsBtn.className='btn';inputsBtn.textContent='Inputs';inputsBtn.onclick=()=>{inputDialog.style.display='block';};
document.getElementById('mainUI').appendChild(inputsBtn);

// Input buttons full-screen video
inputDialog.querySelectorAll('.input-btn').forEach(btn=>{btn.onclick=()=>{
  const src=btn.dataset.src;
  const vid=document.createElement('video');vid.autoplay=true;vid.controls=true;vid.style.position='fixed';vid.style.top='0';vid.style.left='0';vid.style.width='100%';vid.style.height='100%';vid.style.zIndex='999';
  const s=document.createElement('source');s.src=src;s.type='service/webos-external';vid.appendChild(s);
  document.body.appendChild(vid);vid.onclick=()=>document.body.removeChild(vid);log('Playing '+btn.textContent);
};});
</script>
</body>
</html>
